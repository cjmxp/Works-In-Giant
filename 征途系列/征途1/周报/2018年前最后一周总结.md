# 2018年前最后一周总结
>时间:翻日历

## 工作情况
1. 完成功能优化：武神状态、善恶殿副本等的需求，并上传。

## 遇到问题及反思
1. 武神状态的图标显示，这个问题是左上角人物图标旁边的武神状态和人物魔盒里边的活动称号：武神是绑定的。要求优化部分是将这两部分分离，不知服务器的处理，可能比较的复杂，前后修改了很多次。最后是多出来三个状态号单独处理左上角的状态。（客户端只要处理对应的状态号常量就行，其余的不用动，还有这个不是人物头顶上的那个白色文字称号，那个文字称号看了一下，在GuiUserInfo里面的SetUserTitle里面，有计算称号长度，其他什么特殊的暂时没看到，也就是说称号实际上服务器已经有处理，不管你有没有显示，当然是目前来看）
2. 邮件系统增加悬浮提示，如果悬浮提示的内容依附在按钮上，可以直接在xml里面设置，只要是静态的。如果是动态的，或者渲染位置有要求的，是图片的，就需要在OnRender里面进行设置。
3. 好帮手部分增加一个接口，这个接口需要服务器那边有一个NPC配置，客户端直接调用FuncUtil里面的zt_util::CallNpcLong就行，这个是远距离调用NPC对话窗口的函数。
4. 附件类型，这个东西也给我一种积重难返的感觉，奇怪的初始设计思路。所以在原基础上，勉强写了一个半自动的按钮形式的QQPanel，保留了滚动特性。
5. 善恶殿踢人命令，主要卡在玩家判断选中的人是否为族长，发现竟然不能用ID来判定，需要用Name来strcmp来判断，有意思。
6. 绝技小窗口的部分，记得要上传到服务器保存玩家的配置。

## 测试
1. 武神的测试，涉及到小退之后称号是否存在，是否共存与其他魔盒称号，其他玩家的观察，退役是否能正常显示。
2. 附件的部分，勉强做到了半自动。如果想要策划一劳永逸，还需要进一步优化，懒得去写了。
3. 善恶殿的踢人比较的麻烦，服务器的测试比较繁琐。需要仔细，三种人群：族长，副族长，族员都要有参与测试。