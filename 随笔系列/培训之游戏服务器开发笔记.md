[TOC]
## 游戏Server服务器开发

### 基本的创建代码

- 创建:vim x.c/x.cpp。（创建后I进入插入模式；完成后，wq存盘退出。）
- 编译:g++/gcc x.cpp/x.c（编译后默认生成a.out文件，如果想设置名称，后面加-o y）
- ./a.out 或者./y

### 平常所遇见的BUG

- 闪退
- 登陆异常（客户端发起的包不见了）
- 宕机导致玩家流失
- 刷道具刷奖励（平衡影响的多）
- 外挂影响平衡（破解客户端，服务器没有限制或者验证）

###程序代码中遇到的问题

- 内存溢出
- 写坏内存
- 使用空指针
- 野指针
- 未初始化数据
- 死循环
- 流程重入（调用次数多了，如果某一次出问题，就不知道）

### 解决问题的方法

- 了解问题->定位问题->分析问题->解决问题->验证问题
- 看代码，打日志，查询，逻辑猜测验证，二分法，调试工具
- 调试工具有GDB，the GNU Project debugger（多语言版本）

### 杂项

- g++ -g -Wall -std=c++11 X.cpp  // 使用C++11的规则

### 内存检测和调试BUG工具

- AddressSanitizer  这个东西是谷歌开源的，使用时会损失一部分性能
- valgrind   这些都能定位到对应的内存问题  
- cppcheck  很不错。（内存越界，内存泄漏，空指针引用，未初始化变量，STL非法使用，异常安全，不合理函数使用）
- TScanCode工具，也不错（客户端以前是抛出错误，尽量在第一现场解决这个错误。。。后来也是当场检查出错误，不抛出了）
- CSVN了解一下
- 服务器只接受消息，不一定来自于客户端（可能还有脱机挂）
- 有一个很明显的引擎这边和服务器的区别，服务器要求一定不能出现问题，所以会有很多的判断，但是引擎则要求效率最高，在一些情况下就不需要判断异常。

### Shell脚本

- Shell是操作系统最外面的一层，提供的是与操作系统最外面的一层。得到响应的速度非常快。
- Shell脚本编写100以内的偶数的和
```Shell
#!/bin/bash

sum=0
num=100
for((i=1;i<=$num;++i)); do
    if [[ $i%2 -eq 0 ]]; then
        sum=$[$i+$sum]
    fi
done
echo "$sum"
```

```Shell
#!/bin/bash

echo $1

str=$(sudo cat /etc/passwd | cut -d : -f 1)

flag=0
for i in $str; do
    if [[ $i -eq $1 ]]; then
        flag=1
    fi
done
echo $flag
```
